<div class="row-fluid">
	
	<div class="span3">
		<% if @tasks_overdue.present? %>
			<span class="attribute_header">Overdue tasks:</span></br>
			<table class="table">
				<% @tasks_overdue.each do |overdue| %>
					<tr>
						<td><%= link_to first_name(overdue), contact_path(overdue.contact_id) %></td>
						<td><%= overdue.task %></td>
						<td><%= overdue.due_date.strftime('%m/%d/%Y') %></td>
						<td><%= link_to "View", contact_path(overdue.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
					</tr>
				<% end %>
			</table>
		<% end %>


		<% if @tasks_within_week_range.present? %>
			<span class="attribute_header">Remaining tasks (1 week):</span></br>
			<table class="table">
				<% @tasks_within_week_range.each do |weekly_tasks| %>
					<tr>
						<td><%= link_to first_name(weekly_tasks), contact_path(weekly_tasks.contact_id) %></td>
						<td><%= weekly_tasks.task %></td>
						<td><%= weekly_tasks.due_date.strftime('%m/%d/%Y') %></td>
						<td><%= link_to "View", contact_path(weekly_tasks.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
					</tr>
				<% end %>
			</table>
		<% end %>

		<br/>

		<% if @tasks_this_month.present? %>
			<span class="attribute_header">Remaining tasks (4 weeks):</span></br>
			<table class="table">
			<% @tasks_this_month.each do |monthly_tasks| %>
				<tr>
					<td><%= link_to first_name(monthly_tasks), contact_path(monthly_tasks.contact_id) %></td>
					<td><%= monthly_tasks.task %></td>
					<td><%= monthly_tasks.due_date.strftime('%m/%d/%Y') %></td>
					<td><%= link_to "View", contact_path(monthly_tasks.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
				</tr>
			<% end %>
			</table>
		<% end %>
	</div>
	
	<div class="span9">
		<h1>All Tasks</h1><br/>
		<%= link_to "Add Task", new_task_path, :class => "btn btn-primary pull-right" %>
		<br/>
		<%= paginate @task %>
		<br/>
		<table class="table table-striped table-bordered">
			<thead>
				<th>Complete</th>
				<th>Contact</th>
				<th><%= sortable "completed", "Status" %></th>
				<th><%= sortable "task" %></th>
				<th><%= sortable "due_date", "Date (mm/dd/yyyy)" %></th>
				<th><%= sortable "category" %></th>
				<th>Action</th>		
			</thead>
		<% @task.each do |task| %>
			<tr rel="<%= task.id %>" >
				<td><%= check_box_tag "#{task.id}", "checkbox", false, :class => "checkbox" %> <%= link_to "Mark as Completed", complete_task_path(task), remote: true, :class => "completed_button #{task.id} hidden" %>Check to complete</td>
				<td><%= link_to first_name(task), contact_path(task.contact_id) %></td>
				<td class="task_status"><%= status(task.completed) %></td>
				<td><%= task.task %></td>
				<td><%= task.due_date.strftime('%m/%d/%Y') %></td>
				<td><%= task.category %></td>
				<td class="text_center"><%= link_to edit_button, edit_task_path(task, contact_id: task.contact_id), :class => "btn btn-success btn-small" %> <%= link_to delete_button, task_path(task), :method => :delete, data: { confirm: 'Are you sure?'}, :class => "btn btn-danger btn-small" %> <%= link_to contact_button, contact_path(task.contact_id), :class => "btn btn-small btn-info" %></td>
			</tr>
		<% end %>	
		</table>
		<%= link_to "Add Task", new_task_path, :class => "btn btn-primary pull-right" %>
		<%= paginate @task %>
	</div>
</div>
