<hr class="hr"></hr>
<h3>Donation Summary</h3>
<strong>Amount donated (this month):</strong><br/>
<%= currency(Donation.this_month_sum) %><br/>
<strong>Amount donated (this year):</strong><br/>
<%= donation_this_year %><br/>
<strong>Amount donated (all time):</strong><br/>
<%= donations_all_time %><br/>
<strong>Average Donation (all time):</strong><br/>
<%= currency(Donation.average_donation) %>
<br/>
<%= link_to "View all Donations", donations_path, :class => "btn btn-warning" %>

<hr class="hr"></hr>

<h3>Tasks summary</h3>
<span class="attribute_header">Number of incomplete tasks:</span><br/>
<%= Task.incomplete_tasks %><br/>
<br/>

<% if @tasks_overdue.present? %>
	<span class="attribute_header">Overdue tasks:</span></br>
	<table class="table">
		<% @tasks_overdue.each do |overdue| %>
			<tr rel="<%= overdue.id %>" >
				<td><%= check_box_tag "#{overdue.id}", "checkbox", false, :class => "checkbox" %> <%= link_to "Mark as Completed", complete_task_path(overdue), remote: true, :class => "completed_button #{overdue.id} hidden" %></td>
				<td><%= link_to first_name(overdue), contact_path(overdue.contact_id) %></td>
				<td><%= overdue.task %></td>
				<td><%= overdue.due_date.strftime('%m/%d/%Y') %></td>
				<td><%= link_to "View", contact_path(overdue.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
			</tr>
		<% end %>
	</table>
<% end %>


<% if @tasks_within_week_range.present? %>
	<span class="attribute_header">Remaining tasks (1 week):</span></br>
	<table class="table">
		<% @tasks_within_week_range.each do |weekly_tasks| %>
			<tr rel="<%= weekly_tasks.id %>" >
				<td><%= check_box_tag "#{weekly_tasks.id}", "checkbox", false, :class => "checkbox" %> <%= link_to "Mark as Completed", complete_task_path(weekly_tasks), remote: true, :class => "completed_button #{weekly_tasks.id} hidden" %></td>
				<td><%= link_to first_name(weekly_tasks), contact_path(weekly_tasks.contact_id) %></td>
				<td><%= weekly_tasks.task %></td>
				<td><%= weekly_tasks.due_date.strftime('%m/%d/%Y') %></td>
				<td><%= link_to "View", contact_path(weekly_tasks.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
			</tr>
		<% end %>
	</table>
<% end %>

<br/>

<% if @tasks_this_month.present? %>
	<span class="attribute_header">Remaining tasks (4 weeks):</span></br>
	<table class="table">
	<% @tasks_this_month.each do |monthly_tasks| %>
		<tr rel="<%= monthly_tasks.id %>" >
			<td><%= check_box_tag "#{monthly_tasks.id}", "checkbox", false, :class => "checkbox" %> <%= link_to "Mark as Completed", complete_task_path(monthly_tasks), remote: true, :class => "completed_button #{monthly_tasks.id} hidden" %></td>
			<td><%= link_to first_name(monthly_tasks), contact_path(monthly_tasks.contact_id) %></td>
			<td><%= monthly_tasks.task %></td>
			<td><%= monthly_tasks.due_date.strftime('%m/%d/%Y') %></td>
			<td><%= link_to "View", contact_path(monthly_tasks.contact_id), :class => "btn btn-small btn-info pull-right" %></td>
		</tr>
	<% end %>
	</table>
<% end %>
<%= link_to "View all Tasks", tasks_path, :class => "btn btn-warning" %>
<br/>

<hr class="hr"></hr>

<br/>

<h3>Special Date Summary</h3>
<% if @occasions_today.present? %>
	<strong><%= "Special dates (today #{Time.now.to_date.strftime('%m/%d/%Y')}):" %></strong><br/>
	<table class="table">
	<% @occasions_today.each do |today| %>
		<tr>
			<td><%= link_to first_name(today), contact_path(today.contact_id)%></td>
			<td><%= today.occasion %></td>
			<td><%= link_to "View", contact_path(today.contact_id), :class => "btn btn-info btn-small pull-right" %></td>
		</tr>
	<% end %>
	</table>
<% end %>

<% if @occasions_week.present? %>
	<strong>Upcoming special dates (This Week):</strong><br/>
	<table class="table">
	<% @occasions_week.each do |week| %>
		<tr>
			<td><%= link_to first_name(week), contact_path(week.contact_id)%></td>
			<td><%= week.occasion %></td>
			<td><%= week.special_date.strftime('%m/%d/%Y') %></td>
			<td><%= link_to "View", contact_path(week.contact_id), :class => "btn btn-info btn-small pull-right" %></td>
		</tr>
	<% end %>
	</table>
<% end %>

<% if @occasions_month.present? %>
	<strong>Upcoming special dates (This Month):</strong><br/>
	<table class="table">
	<% @occasions_month.each do |month| %>
		<tr>
			<td><%= link_to first_name(month), contact_path(month.contact_id)%></td>
			<td><%= month.occasion %></td>
			<td><%= month.special_date.strftime('%m/%d/%Y') %></td>
			<td><%= link_to "View", contact_path(month.contact_id), :class => "btn btn-info btn-small pull-right" %></td>
		</tr>
	<% end %>
	</table>
<% end %>
<%= link_to "View all Special Dates", occasions_path, :class => "btn btn-warning" %>