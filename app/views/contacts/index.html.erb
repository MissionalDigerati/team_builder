<div class="row-fluid">
	
	<div class="span3">			
		<h3>Contact's Summary</h3>
		<strong>Total number of contacts:</strong> <br/>
		<%= Contact.contact_count %><br/>
		<strong>Number of Non-Believers:</strong> <br/>
		<%= Contact.non_believers %><br/>
		<strong>Number of new contacts (last 4 weeks):</strong><br/>
		<%= Contact.contacts_in_last_month %><br/>
		<strong>Number of new contacts (last year):</strong><br/>
		<%= Contact.contacts_in_last_year %><br/>
		<strong>Number of contacts that have donated:</strong> <br/>
		<%= Contact.donated_contacts %><br/>
		<br/>
		<% if @new_contacts.present? %>
			<strong>Recent contacts (past week):</strong><br/>
			<table class="table">
				<% @new_contacts.each do |new_contact| %>
				<tr>
					<td><%= link_to full_name(new_contact), contact_path(new_contact) %></td>
					<td><%= link_to "View", contact_path(new_contact), :class => "btn btn-info btn-small pull-right" %></td>
				</tr>
				<% end %>
			</table>
		<% end %>
	</div>

	<div class="span9">
		
		<h1><%= link_to "All Contacts", contacts_path %></h1><br/>
		<%= tag_param %>
		<%= link_to 'New Contact', new_contact_path, :class => "btn btn-primary pull-right" %>
		<br/>
		<%= paginate @contacts %>
		<br/>
		<table class="table index table-bordered table-hover table-striped">
		  <tr>
			  <th>Tags</th>
		    <th><%= sortable "first_name" %></th>
				<th><%= sortable "last_name" %></th>
				<th><%= sortable "spouse_name" %></th>
				<th><%= sortable "believer" %></th>
				<th><%= sortable "preferred_contact" %></th>
				<th><%= sortable "receive_newsletter", "Newsletter" %></th>
				<th><%= sortable "created_at" %></th>
		    <th>Action</th>
		  </tr>

		<% @contacts.each do |contact| %>
		  <tr>
			
				<td>
					<% if contact.tag_list.present? %>
					<ul class="nav nav-pills tag_container">
					  <li class="dropdown">
					    <a class="dropdown-toggle"
					       data-toggle="dropdown" href="#">
					        tags
					        <b class="caret"></b>
					      </a>
					    <ul class="dropdown-menu">
					      <% contact.tag_list.each do |tag| %>
									<li><%= link_to tag, tag_path(tag) %></li>
								<% end %>
					    </ul>
					  </li>
					</ul>
						<!-- <%= link_to contact.tag_list.first, tag_path(contact.tag_list.first), :class => "label label-important" %> -->
					<% end %>
				</td>
				<td><%= link_to contact.first_name.capitalize, contact %></td>
		    <td><%= contact.last_name.capitalize %></td>
				<td><%= contact.spouse_name.capitalize %></td>
				<td class="believer"><%= contact.news_letter(contact.believer) %></td>
				<td><%= contact.preferred_contact %></td>
				<td><%= news_letter(contact.receive_newsletter) %></td>
				<td><%= contact.created_at.strftime('%m/%d/%Y') %></td>
				<td class="text_center"><%= link_to edit_button, edit_contact_path(contact), :class => "btn btn-success btn-small"  %> <%= link_to delete_button, contact, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-small"  %> <%= link_to contact_button, contact, :class => "btn btn-info btn-small"  %></td>
			
		  </tr>
		<% end %>
		</table>

		<br />
		<%= link_to 'New Contact', new_contact_path, :class => "btn btn-primary pull-right" %>
		<%= paginate @contacts %>
		
	</div> <!-- span12 -->

</div> <!-- row fluid -->